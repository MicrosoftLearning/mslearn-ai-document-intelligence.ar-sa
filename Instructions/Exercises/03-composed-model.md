---
lab:
  title: إنشاء نموذج تحليل ذكي لمستند مكوّن
  module: Module 6 - Document Intelligence
---

# إنشاء نموذج تحليل ذكي لمستند مكوّن

في هذا التمرين، ستقوم بإنشاء وتدريب نموذجين مخصصين لتحليل نماذج ضريبية مختلفة. بعد ذلك، ستقوم بإنشاء نموذج مكون يتضمن كلا النموذجين المخصصين. ستختبر النموذج عن طريق إرسال نموذج وستتحقق من أنه يتعرف على نوع المستند والحقول المسماة بشكل صحيح.

## إعداد الموارد

سنستخدم برنامج نصي لإنشاء مورد التحليل الذكي لمستند الذكاء الاصطناعي في Azure، وحساب تخزين مع نماذج نموذجية، ومجموعة موارد:

1. ابدأ تشغيل Visual Studio Code.
1. افتح لوحة (SHIFT+CTRL+P) وشغّل **Git: استنسخ الأمر ** لاستنساخ مستودع `https://github.com/MicrosoftLearning/mslearn-ai-document-intelligence` إلى مجلد محلي (لا يُهم أي مجلد).
1. عند استنساخ المستودع، افتح المجلد في تعليمة Visual Studio البرمجية.

    > **ملاحظة**: إذا عرضت لك تعليمة Visual Studio البرمجية رسالة منبثقة لمطالبتك بالثقة في التعليمات البرمجية التي تفتحها، فانقر فوق **نعم، أثق في خيار الكُتاب** في النافذة المنبثقة.
    
    > **ملاحظة**: إذا تمت مطالبتك بإضافة الأصول المطلوبة للبناء وتصحيح الأخطاء، فحدد **ليس الآن**. إذا كانت هناك أي نوافذ منبثقة أخرى من Visual Studio Code، يمكنك تجاهلها بأمان.

1. قم بتوسيع مجلد **Labfiles** في الجزء الأيسر، وانقر بزر الماوس الأيمن فوق الدليل **03-composed-model**. حدد خيار الفتح في الوحدة الطرفية المتكاملة، ونفّذ البرنامج النصي التالي:

    ```powershell
    az login --output none
    ```

    > **ملاحظة**: إذا تلقيتَ خطأ بشأن عدم وجود اشتراكات نشطة وتم تمكين المصادقة متعددة العوامل ( MFA) ، فقد تحتاج إلى تسجيل الدخول إلى مدخل Microsoft Azure في `https://portal.azure.com` أولاً، ثم إعادة تشغيل `az login`.

1. عند المطالبة، قم بتسجيل الدخول إلى اشتراكك في Azure. ثم ارجع إلى Visual Studio Code وانتظر حتى تكتمل عملية تسجيل الدخول.
1. في موجه الوحدة الطرفية المتكاملة، شغّل الأمر التالي لإعداد الموارد:

   ```powershell
   ./setup.ps1
   ```

   > **هام**: المورد الأخير الذي تم إنشاؤه بواسطة البرنامج النصي هو خدمة التحليل الذكي لمستند الذكاء الاصطناعي في Azure الخاصة بك. إذا فشل هذا الأمر بسبب وجود مورد من الطبقة F0 لديك بالفعل، فاستخدم هذا المورد لهذا المختبر أو أنشئ مورد يدويًا باستخدام الطبقة S0 في بوابة Azure.

## إنشاء نموذج مخصص لـ 1040 Forms

لإنشاء نموذج مكون، يجب علينا أولاً إنشاء نموذجين مخصصين أو أكثر. لإنشاء النموذج المخصص الأول:

1. في علامة تبويب مستعرض جديدة، ابدأ تشغيل أداة **Azure AI Document Intelligence Studio** على `https://documentintelligence.ai.azure.com/studio`
1. مرر لأسفل، ومن ثم ضمن **Custom models**، حدد **Custom extraction model**.
1. إذا طُلب منك تسجيل الدخول إلى حسابك، فاستخدم بيانات اعتماد Azure لديك.
1. إذا تم سؤالك عن مورد التحليل الذكي لمستند الذكاء الاصطناعي في Azure لاستخدامه، فحدد اسم الاشتراك والمورد الذي استخدمته عند إنشاء مورد التحليل الذكي لمستند الذكاء الاصطناعي في Azure.
1. ضمن **My Projects**، حدد **+ Create a project**.
1. في مربع نص **Project name**، اكتب **1040 Forms**، ثم حدد **Continue**.
1. في صفحة **Configure service resource**، في القائمة المنسدلة **Subscription**، حدد اشتراك Azure الخاص بك.
1. في القائمة المنسدلة **Resource group**، حدد **DocumentIntelligenceResources&lt;xxxx&gt;** الذي تم إنشاؤه لك.
1. في القائمة المنسدلة **Azure AI Document Intelligence or Azure AI Service Resource**، حدد **DocumentIntelligence&lt;xxxx&gt;**.
1. في القائمة المنسدلة **إصدار واجهة برمجة التطبيقات**، تأكد من تحديد **معاينة 2023-10-31**، ومن ثم تحديد **متابعة**.
1. من صفحة **ربط مصدر بيانات التدريب** في القائمة المنسدلة **الاشتراك**، حدد اشتراك Azure الخاص بك.
1. في القائمة المنسدلة **مجموعة الموارد**، حدد **DocumentIntelligenceResources&lt;xxxx&gt;**.
1. في القائمة المنسدلة **Storage account**، حدد حساب التخزين المدرج فقط. إذا كان لديك حسابات تخزين متعددة في اشتراكك، فاختَر الحساب الذي يبدأ بـ *docintelstorage*
1. في القائمة المنسدلة **Blob container**، حدد **1040examples**، ثم حدد **Continue**.
1. في الصفحة **Review and create**، حدد **Create project**.
1. حدد **تشغيل التخطيط** في النافذة المنبثقة *بدء وضع العلامات الآن*، وانتظر حتى يكتمل التحليل.

## إنشاء نموذج مخصص لـ 1040 Forms

الآن، لنسمي الحقول في نماذج المثال:

1. من صفحة **بيانات الملصق**، في أعلى يسار الصفحة، حدد **+ إضافة حقل**، ثم حدد **حقل**.
1. اكتب **FirstName** ثم اضغط على *Enter*.
1. حدد المستند المسمى **f1040_1.pdf** في القائمة اليمنى، وحدد **John** ومن ثم حدد **FirstName**.
1. في أعلى يسار الصفحة، حدد **+ إضافة حقل**، ثم حدد **حقل**.
1. اكتب **FirstName** ثم اضغط على *Enter*.
1. في المستند، حدد **Doe** ثم حدد **LastName**.
1. في أعلى يسار الصفحة، حدد **+ إضافة حقل**، ثم حدد **حقل**.
1. أدخل **City**، ثم اضغط على *Enter*.
1. في المستند، حدد **Los Angeles** ثم حدد **City**.
1. في أعلى يسار الصفحة، حدد **+ إضافة حقل**، ثم حدد **حقل**.
1. اكتب **State**، ثم اضغط على *Enter*.
1. في المستند، حدد **CA** ثم حدد **State**.
1. كرر عملية وضع العلامات للنماذج المتبقية في القائمة على اليمين، باستخدام التصنيفات التي قمتَ بإنشائها. قم بتسمية الحقول الأربعة نفسها: *FirstName* و*LastName* و*City* و*State*.

> **هام** لأغراض هذا التمرين، نستخدم خمسة نماذج فقط ونسمي أربعة حقول فقط. في نماذج العالم الحقيقي الخاصة بك، يجب عليك استخدام أكبر عدد ممكن من العينات لزيادة دقة وثقة تنبؤاتك. يجب أيضاً تسمية كافة الحقول المتوفرة في النماذج، بدلاً من أربعة حقول فقط.

## تدريب نموذج مخصص لـ 1040 Forms

الآن بعد أن تمت تسمية نماذج العينة، يمكننا تدريب النموذج المخصص الأول:

1. في the Azure AI Document Intelligence Studio، حدد **تدريب**.
1. في مربع الحوار **Train a new model**، في مربع النص **Model ID**، اكتب **1040FormsModel**.
1. في القائمة المنسدلة **Build mode**، حدد **Template**، ثم حدد **Train**. 
1. في مربع الحوار **Training in progress**، حدد **Go to Models**.

## إنشاء نموذج مخصص لـ 1099 Forms

الآن، يجب عليك إنشاء نموذج ثانٍ، والذي ستقوم بتدريبه على نماذج الضرائب 1099 المثال:

1. في Azure AI Document Intelligence Studio، حدد **نموذج استخراج مخصص**.
1. ضمن **My Projects**، حدد **+ Create a project**.
1. في مربع النص **Project name**، اكتب **1099 Forms**، ثم حدد **Continue**.
1. في صفحة **Configure service resource**، في القائمة المنسدلة **Subscription**، حدد اشتراك Azure الخاص بك.
1. في القائمة المنسدلة **مجموعة الموارد**، حدد **DocumentIntelligenceResources&lt;xxxx&gt;**.
1. في القائمة المنسدلة **Azure AI Document Intelligence or Azure AI Service Resource**، حدد **DocumentIntelligence&lt;xxxx&gt;**.
1. في القائمة المنسدلة **إصدار واجهة برمجة التطبيقات**، تأكد من تحديد **معاينة 20223-10-31**، ثم حدد **متابعة**.
1. في الصفحة **ربط مصدر بيانات التدريب** في القائمة المنسدلة **اشتراك**، حدد اشتراك Azure الخاص بك.
1. في القائمة المنسدلة **مجموعة الموارد**، حدد **DocumentIntelligenceResources&lt;xxxx&gt;**.
1. في القائمة المنسدلة **Storage account**، حدد حساب التخزين المدرج فقط.
1. في القائمة المنسدلة **Blob container**، حدد **1099examples**، ثم حدد **Continue**.
1. في الصفحة **Review and create**، حدد **Create project**.
1. حدد **تشغيل التخطيط** في النافذة المنبثقة *بدء وضع العلامات الآن*، وانتظر حتى يكتمل التحليل.

## تسمية نموذج مخصص لـ 1099 Forms

الآن، قم بتسمية نماذج المثال مع بعض الحقول:

1. من صفحة **بيانات الملصق**، في أعلى يسار الصفحة، حدد **+ إضافة حقل**، ثم حدد **حقل**.
1. اكتب **FirstName** ثم اضغط على *Enter*.
1. حدد المستند المسمى **f1099msc_payer.pdf**، وحدد **John** ومن ثم حدد **FirstName**.
1. في أعلى يسار الصفحة، حدد **+ إضافة حقل**، ثم حدد **حقل**.
1. اكتب **FirstName** ثم اضغط على *Enter*.
1. في المستند، حدد **Doe** ثم حدد **LastName**.
1. في أعلى يسار الصفحة، حدد **+ إضافة حقل**، ثم حدد **حقل**.
1. أدخل **City**، ثم اضغط على *Enter*.
1. في المستند، حدد **New Haven** ثم حدد **City**.
1. في أعلى يسار الصفحة، حدد **+ إضافة حقل**، ثم حدد **حقل**.
1. اكتب **State**، ثم اضغط على *Enter*.
1. في المستند، حدد **CT** ثم حدد **State**.
1. كرر عملية وضع العلامات للنماذج المتبقية في القائمة على اليسار. قم بتسمية الحقول الأربعة نفسها: *FirstName* و*LastName* و*City* و*State*.

## تدريب نموذج مخصص لـ 1099 Forms

يمكنك الآن تدريب النموذج المخصص الثاني:

1. في the Azure AI Document Intelligence Studio، حدد **تدريب**.
1. في مربع الحوار **Train a new model**، في مربع النص **Model ID**، اكتب **1099FormsModel**.
1. في القائمة المنسدلة **Build mode**، حدد **Template**، ثم حدد **Train**.
1. في مربع الحوار **Training in progress**، حدد **Go to Models**.
1. قد تستغرق عملية التدريب بضع دقائق. قم بتحديث المستعرض أحياناً حتى يعرض كلا النموذجين الحالة **الناجحة**.

## إنشاء نموذج مكون وتجميعه

اكتمل الآن النموذجان المخصصان، اللذان يحللان نماذج الضرائب 1040 و1099. يمكنك المتابعة لإنشاء النموذج الذي تم إنشاؤه:

1. في صفحة نماذج التحليل الذكي لمستند الذكاء الاصطناعي في Azure، حدد كلاً من **1040FormsModel** و**1099FormsModel**.
1. في أعلى قائمة النماذج، حدد **Compose**.
1. في مربع الحوار **Compose a new model**، في مربع النص **Model ID**، اكتب **TaxFormsModel**، ثم حدد **Compose**. ينشئ التحليل الذكي لمستند الذكاء الاصطناعي في Azure النموذج المكون ويعرضه في قائمة النماذج المخصصة:

## استخدام النموذج المكون

الآن بعد اكتمال النموذج المكون، دعونا نختبره باستخدام نموذج مثال:

1. في Azure AI Document Intelligence Studio، حدد صفحة **Test**، وحدد **TaxFormsModel** من القائمة المنسدلة.
1. حدد **استعراض الملفات** ثم قم بالاستعراض وصولاً إلى الموقع الذي نسخت المستودع فيه.
1. حدد **03-composed-model/trainingdata/TestDoc/f1040_7.pdf**، ومن ثم حدد **Open**.
1. حدد **تشغيل التحليل**. يقوم التحليل الذكي لمستند الذكاء الاصطناعي في Azure بتحليل النموذج باستخدام النموذج الذي تم إنشاؤه.
1. المستند الذي قمت بتحليله هو مثال على نموذج ضريبة 1040. تحقق من خاصية **DocType** لمعرفة ما إذا كان قد تم استخدام النموذج المخصص الصحيح. تحقق أيضاً من القيم **FirstName** و**LastName** و**City** و**State** التي يحددها النموذج.

## تنظيف الموارد

الآن بعد أن رأيت كيفية عمل النماذج المكونة، دعنا نزيل الموارد التي أنشأتها في اشتراك Azure الخاص بك.

1. في مدخل **Azure** على `https://portal.azure.com/`، حدد **Resource groups**.
1. في قائمة **مجموعات الموارد** حدد **DocumentIntelligenceResources&lt;xxxx&gt;** الذي قمتَ بإنشائه، ثم حدد **Delete resource group**.
1. في مربع النص **كتابة اسم مجموعة الموارد**، اكتب اسم مجموعة الموارد، ثم حدد **حذف** لحذف مورد "التحليل الذكي للمستند" وحساب التخزين.

## معرفة المزيد

- [إنشاء نماذج مخصصة](/azure/ai-services/document-intelligence/concept-composed-models)
